<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
	$(
		function(){
// 			alert("jquery 테스트");
			$(".d").hover(function(){
				$.ajax({         
					url:"/schedule/calcountajax",
					method:"get",
					dataType:"text", //서버로부터 받을때 타입 정의
					success:function(data){//서버로 부터 받는 데이터 data변수에 저장
// 						console.log(data);
						$("body").append(data);
					},
					error:function(){
						console.log("통신실패");
					}
				});
			},
			function(){console.log("마우스 나갔을때")});
		}
	);
</script>
</head>
<body>
<div layout:fragment="content">
	<div id="container">
		<h1>일정관리[달력보기]</h1>
		<div class="cal">
			<div id="ctitle">
				<a th:href="@{/schedule/calendar(year=${calMap.year-1},month=${calMap.month})}">◁</a>
				<a th:href="@{/schedule/calendar(year=${calMap.year},month=${calMap.month-1})}">◀</a>
				<span class="y" th:text="${calMap.year}"></span>
				<span>년</span>
				<span class="m" th:text="${calMap.month}"></span>
				<span>월</span>
				<a th:href="@{/schedule/calendar(year=${calMap.year},month=${calMap.month+1})}">▶</a>
				<a th:href="@{/schedule/calendar(year=${calMap.year+1},month=${calMap.month})}">▷</a>
			</div>
			<div id="thead">
				<div>일</div><div>월</div><div>화</div>
				<div>수</div><div>목</div><div>금</div><div>토</div>
			</div>
			<div id="tbody">
				<!-- 해당 달의 1일의 요일: 만약 월요일이라면 2라는 값 반환 -->
				<th:block th:if="${calMap.dayOfWeek>1}">
					<div th:each="num:${#numbers.sequence(1,calMap.dayOfWeek-1)}">&nbsp;</div>
				</th:block>
				<th:block th:each="i:${#numbers.sequence(1,calMap.lastDay)}">
					<div>
						<a th:href="@{/schedule/calboardlist(year=${calMap.year},month=${calMap.month},date=${i})}"
						   th:text="${i}" class="d"></a>
						<a th:href="@{/schedule/addcalboardform(year=${calMap.year},month=${calMap.month},date=${i})}">
							<img class="pen" th:src="@{/img/pen.png}" alt="일정추가"/>
						</a>
						<!-- i값하고 clist의 날짜와 비교해서 일정 출력 -->
						[(${@util.getCalViewList(i,clist)})]
					</div>
				</th:block>
			</div>
		</div>
	</div>
</div>
</body>
</html>




